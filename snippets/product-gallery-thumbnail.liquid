{%- comment -%}
	------------------------------------------------------------------------------
	Snippet: Product gallery image
	This snippet will output main image on product page

	- image: image object (optional, object),
	- is_lazy: is lazy load enable (optional, default: true, boolean)

	{%- render "product-gallery-image", image: image, is_lazy: is_lazy -%}
	------------------------------------------------------------------------------
{%- endcomment -%}

{%- if image -%}
	{% comment %}
		Image width map
	{% endcomment %}
	{% assign base420         = 90 %}
	{% assign base420_2x      = 180 %}
	{% assign base1440 		  = 100 %}
	{% assign base1440_2x 	  = 200 %}
	{% assign base_default	  = 108 %}
	{% assign base_default_2x = 216 %}

	{% if image.aspect_ratio > 1 %}
		{% assign w420 		   = base420 		 | times: image.aspect_ratio | round %}
		{% assign w420_2x	   = base420_2x 	 | times: image.aspect_ratio | round %}
		{% assign w1440 	   = base1440 		 | times: image.aspect_ratio | round %}
		{% assign w1440_2x	   = base1440_2x 	 | times: image.aspect_ratio | round %}
		{% assign w_default    = base_default 	 | times: image.aspect_ratio | round %}
		{% assign w_default_2x = base_default_2x | times: image.aspect_ratio | round %}
	{% else %}
		{% assign w420 		   = base420 		 %}
		{% assign w420_2x	   = base420_2x 	 %}
		{% assign w1440 	   = base1440 		 %}
		{% assign w1440_2x	   = base1440_2x 	 %}
		{% assign w_default    = base_default 	 %}
		{% assign w_default_2x = base_default_2x %}
	{% endif %}

	{% assign max_width = 9999 %}
	{% if w420 > 		 max_width %}{% assign w420 = 		  max_width %}{% endif %}
	{% if w420_2x > 	 max_width %}{% assign w420_2x = 	  max_width %}{% endif %}
	{% if w1440 > 		 max_width %}{% assign w1440 = 		  max_width %}{% endif %}
	{% if w1440_2x > 	 max_width %}{% assign w1440_2x = 	  max_width %}{% endif %}
	{% if w_default >  	 max_width %}{% assign w_default = 	  max_width %}{% endif %}
	{% if w_default_2x > max_width %}{% assign w_default_2x = max_width %}{% endif %}

	{% assign w420 = 		 w420 		  | append: 'x' %}
	{% assign w420_2x = 	 w420_2x 	  | append: 'x' %}
	{% assign w1440 = 		 w1440 		  | append: 'x' %}
	{% assign w1440_2x = 	 w1440_2x 	  | append: 'x' %}
	{% assign w_default = 	 w_default 	  | append: 'x' %}
	{% assign w_default_2x = w_default_2x | append: 'x' %}
	{% comment %}
		End Image width map
	{% endcomment %}

	{%- if is_lazy -%}
		<picture class="lazy">
			<source
				data-srcset="{{- image | img_url: w420 }} 1x, {{ image | img_url: w420_2x }} 2x"
				srcset="{{- image | img_url: '10x' -}}"
				media="(max-width: 420px)"
				width="{{ base420 }}"
				height="{{ base420 }}"
			>

			<source
				data-srcset="{{- image | img_url: w1440 }} 1x, {{ image | img_url: w1440_2x }} 2x"
				srcset="{{- image | img_url: '10x' -}}"
				media="(max-width: 1440px)"
				width="{{ base1440 }}"
				height="{{ base1440 }}"
			>

			<img
				class="product-media__image"
				data-srcset="{{- image | img_url: w_default }} 1x, {{ image | img_url: w_default_2x }} 2x"
				data-src="{{- image | img_url: w_default }}"
				srcset="{{- image | img_url: '10x' -}}"
				src="{{- image | img_url: '10x' -}}"
				alt="{{- image.alt -}}"
				width="{{ base_default }}"
				height="{{ base_default }}"
			>
		</picture>
	{%- else -%}
		<picture>
			<source
				data-srcset="{{- image | img_url: w420 }} 1x, {{ image | img_url: w420_2x }} 2x"
				srcset="{{- image | img_url: '10x' -}}"
				media="(max-width: 420px)"
				width="{{ base420 }}"
				height="{{ base420 }}"
			>

			<source
				srcset="{{- image | img_url: w1440 }} 1x, {{ image | img_url: w1440_2x }} 2x"
				media="(max-width: 1440px)"
				width="{{ base1440 }}"
				height="{{ base1440 }}"
			>

			<img
				class="product-media__image"
				srcset="{{- image | img_url: w_default -}} 1x, {{- image | img_url: w_default_2x -}} 2x"
				src="{{- image | img_url: w_default -}}"
				alt="{{- image.alt -}}"
				width="{{ base_default }}"
				height="{{ base_default }}"
			>
		</picture>
	{%- endif -%}
{% endif %}
