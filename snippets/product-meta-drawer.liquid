{% comment %}
------------------------------------------------------------------------------
  Snippet: Product Drawers Content
------------------------------------------------------------------------------
{% endcomment %}

{%- assign drawers = blocks | where: 'type', 'meta_drawers' | first -%}

{%- if drawers != nil -%}
	{%- comment -%}
		Description variables
	{%- endcomment -%}
	{%- assign field_show = drawers.settings.show_field -%}
	{%- assign field_toggle_text = drawers.settings.field_toggle_text -%}
	{%- assign drawer_title = drawers.settings.field_drawer_title -%}


	{%- comment -%}
		Custom drawer 1 variables
	{%- endcomment -%}
	{%- assign custom_drawer_title_1 = drawers.settings.custom_drawer_title_1 -%}
	{%- assign custom_drawer_text_1 = drawers.settings.custom_drawer_text_1 -%}
	{%- assign show_custom_drawer_1 = false -%}

	{% if custom_drawer_title_1 != blank and custom_drawer_text_1 != blank %}
		{%- assign show_custom_drawer_1 = true -%}
	{% endif %}

	{%- capture description -%}
		{% assign toggle_id = 'descriptionDrawer-' | append: section.id %}
		{% assign product_description = product.description | replace: '<img', '<img loading="lazy"'%}

		{%- include 'product-form-drawer',
			title: description_drawer_title,
			content: product_description,
			toggle_id: toggle_id,
			class_container: 'product-description-drawer',
			class_body: 'rte-product-drawer rte-product-drawer--description'
		-%}
	{%- endcapture -%}

	{%- capture shipping_and_returns -%}
		{% assign toggle_id = 'shippingAndReturnsDrawer-' | append: section.id %}

		{%- include 'product-form-drawer',
			title: shipping_and_returns_drawer_title,
			content: shipping_and_returns.content,
			toggle_id: toggle_id,
			class_container: 'product-shipping-and-returns-drawer',
			class_body: 'rte-product-drawer'
		-%}
	{%- endcapture -%}

	{% capture custom_drawer_1 %}
		{% assign toggle_id = 'CustomDrawer-1-' | append: section.id %}

		{%- include 'product-form-drawer',
			title: custom_drawer_title_1,
			content: custom_drawer_text_1,
			toggle_id: toggle_id,
			class_container: '',
			class_body: 'rte-product-drawer'
		-%}
	{% endcapture %}

	{%- if show_description or show_shipping_and_returns or show_custom_drawer_1 -%}
		{%- if show_description -%}
			{{- description -}}
		{%- endif -%}

		{%- if show_shipping_and_returns -%}
			{{- shipping_and_returns -}}
		{%- endif -%}

		{%- if show_custom_drawer_1 -%}
			{{- custom_drawer_1 -}}
		{%- endif -%}
	{%- endif -%}
{%- endif -%}
